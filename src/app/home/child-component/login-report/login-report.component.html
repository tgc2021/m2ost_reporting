<div class="login-web">
  <div class="dropdown-container-box d-flex w-100 p-2 justify-content-center gap-3">
    <div class="dropbox">
      <button type="button" class="dropdown-btn custom-dropdown-button fontRoboto" data-bs-toggle="dropdown"
        aria-expanded="false" (click)="getDepartment()">
        <!-- {{ departmentValue }} -->
        <!-- <ng-container *ngIf="(selectedDepartmentValues?.length || 0) > 1">
          <span class="example-additional-selection fontRoboto">
            (+{{(selectedDepartmentValues.length || 0) - 1}} {{selectedDepartmentValues.length === 2 ? 'other' :
            'others'}})
          </span>
        </ng-container> -->
        <!-- <i class="bi bi-caret-down-fill down-icon"></i> -->
        <div class="d-flex">
          <div class="ellipsis">
              {{ departmentValue }}
          </div>
          <div><i class="bi bi-caret-down-fill down-icon"></i></div>
        </div>
      </button>
      <ul class="dropdown-menu dept-menu" id="dept">
        <li class="fontRoboto" (click)="$event.stopPropagation()">
          <input type="checkbox" class="checkbox" [checked]="isAllDepartmentsSelected()" id="selectAllDepartments"
            (change)="toggleSelectAllDepartments($event)" />
          Select All
        </li>
        <li class="fontRoboto" *ngFor="let dept of department; let i = index" (click)="$event.stopPropagation()">
          <input type="checkbox" class="checkbox" [checked]="isDepartmentSelected(dept)" id="{{'dept-' + i}}"
            (change)="toggleDepartmentSelection(dept, $event)" />
          {{ dept.Department_name }}
        </li>
      </ul>

    </div>
    <div class="dropbox">
      <button type="button" class="dropdown-btn custom-dropdown-button fontRoboto" data-bs-toggle="dropdown"
          [disabled]="departmentValue =='Select Department'" aria-expanded="false" (click)="getRoles()">
      <div class="d-flex">
              <div class="ellipsis">
                  {{ roleValue }}
                  <!-- <ng-container *ngIf="(selectedValue?.length || 0) > 1">
                      <span class="example-additional-selection fontRoboto">
                          (+{{(selectedValue.length || 0) - 1}} {{selectedValue.length === 2 ? 'other' : 'others'}})
                      </span>
                  </ng-container> -->
                 </div> 
                 <div><i class="bi bi-caret-down-fill down-icon"></i></div>
          </div>
      </button>
      <ul class="dropdown-menu role-menu" id="role">
          <li class="fontRoboto" (click)="$event.stopPropagation()">
              <input type="checkbox" class="checkbox" [checked]="isAllSelected()" id="selectAll"
                  (change)="toggleSelectAll($event)" />
              Select All
          </li>
          <li *ngFor="let role of roles; let i = index" class="fontRoboto" (click)="$event.stopPropagation()">
              <input type="checkbox" class="checkbox" [checked]="isSelected(role)" id="{{i}}"
                  (change)="toggleRoleSelection(role, $event)" />
              {{role.Text}}
          </li>
      </ul>
  </div>
    <!-- <div class="dropbox">
      <button type="button" class="dropdown-btn custom-dropdown-button fontRoboto" data-bs-toggle="dropdown"
        aria-expanded="false">
        {{daysvalue}}
        <i class="bi bi-caret-down-fill down-icon"></i>

        <ul class="dropdown-menu dept-menu">
          <li class="fontRoboto" *ngFor="let day of days;let i=index" (click)="selectDays(day)">{{day}}</li>
        </ul>
      </button>
    </div> -->
  </div>
  <div class="dropdown-container-box  d-flex w-100 pt-2 justify-content-center gap-3">
    <mat-form-field class="example-full-width date-container">
      <mat-label>Start Date</mat-label>
      <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="startDatePicker"
        (dateChange)="onStartDateSelected($event)" readonly>
      <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
      <mat-datepicker #startDatePicker></mat-datepicker>
    </mat-form-field>
    <mat-form-field class="example-full-width date-container">
      <mat-label>End Date</mat-label>
      <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="endDatePicker"
        (dateChange)="onEndDateSelected($event)" readonly>
      <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
      <mat-datepicker #endDatePicker></mat-datepicker>
    </mat-form-field>

    <div class="buttons d-flex justify-content-start">
      <!-- <div>{{this.formattedStartDate}}</div> -->
      <!-- && this.selectedDepartmentIds!=[] &&this.selectedRoleIds!=[]&&this.daysvalue !='' -->
      <button class="btn w-100 fontRoboto" type="submit" (click)="getLoginReport()" >SEARCH</button>
      <!-- <button class="btn w-100 fontRoboto" type="submit" (click)="getLoginReport()"
     [disabled]="!isFormValid()">SEARCH</button> -->
    </div>
    <div class="buttons d-flex justify-content-start">
      <button class="btn w-100 fontRoboto" type="reset" (click)="reset()">RESET</button>
    </div>
  </div>

  <!-- <div class="date-container d-flex w-100 p-2 justify-content-center gap-3">
    </div> -->

  <div class="table-container px-2">
    <div class="search-container py-2 d-flex justify-content-between">
      <div class="fontRoboto login-label">
        Login Report
      </div>
      <div class="d-flex gap-3">
        <div>
          <input class="search" matInput (keyup)="applyFilter($event)" placeholder="Search" #input>
        </div>
        <button class="fontRoboto exportExcelButton" type="" (click)="exportToExcel()">Export to Excel</button>
      </div>
    </div>

    <!-- <div class="mat-elevation-z8">
    
      <table mat-table [dataSource]="dataSource" matSort>
        <ng-container matColumnDef="Userid">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> User ID </th>
          <td mat-cell *matCellDef="let element"> {{element.Userid}} </td>
        </ng-container>
        <ng-container matColumnDef="Name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> First Name</th>
          <td mat-cell *matCellDef="let element"> {{element.Name}} </td>
        </ng-container>
        <ng-container matColumnDef="Gender">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> Gender </th>
          <td mat-cell *matCellDef="let element"> {{element.Gender}} </td>
        </ng-container>
        <ng-container matColumnDef="Region">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> Region </th>
          <td mat-cell *matCellDef="let element"> {{element.Region}} </td>
        </ng-container>
        <ng-container matColumnDef="Role">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> Role </th>
          <td mat-cell *matCellDef="let element">
            {{element.Role}}
          </td>
        </ng-container>
        <ng-container matColumnDef="Designation">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> Designation </th>
          <td mat-cell *matCellDef="let element">
            {{element.Designation}}
          </td>
        </ng-container>
        <ng-container matColumnDef="City">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> City </th>
          <td mat-cell *matCellDef="let element">
            {{element.City}}
          </td>
        </ng-container>
        <ng-container matColumnDef="Overall_Login_Status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> Overall Login Status </th>
          <td mat-cell *matCellDef="let element">
            {{element.Overall_Login_Status}}
          </td>
        </ng-container>
        <ng-container matColumnDef="Login_Activity">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> Login Activity</th>
          <td mat-cell *matCellDef="let element">
            {{element.Login_Activity}}
          </td>
        </ng-container>
        <ng-container matColumnDef="Store_Type">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky>Store Type</th>
          <td mat-cell *matCellDef="let element">
            {{element.Store_Type}}
          </td>
        </ng-container>
        <ng-container matColumnDef="StoreCode">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> Store Code </th>
          <td mat-cell *matCellDef="let element">
            {{element.StoreCode}}
          </td>
        </ng-container>
        <ng-container matColumnDef="Store_Name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky>Store Name</th>
          <td mat-cell *matCellDef="let element">
            {{element.Store_Name}}
          </td>
        </ng-container>
        <ng-container matColumnDef="Latest_Login">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> Latest Login </th>
          <td mat-cell *matCellDef="let element">
            {{element.Latest_Login}}
          </td>
        </ng-container>
        <ng-container matColumnDef="Date_of_joining">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> Date_of_joining </th>
          <td mat-cell *matCellDef="let element">
            {{element.Date_of_joining}}
          </td>
        </ng-container>
        <ng-container matColumnDef="Date_Of_Creation">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky> Date Of Creation </th>
          <td mat-cell *matCellDef="let element">
            {{element.Date_Of_Creation}}
          </td>
        </ng-container>
        <ng-container matColumnDef="Status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sticky>Status</th>
          <td mat-cell *matCellDef="let element">
            {{element.Status}}
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    
      <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of periodic elements">
      </mat-paginator>    
   
    </div> -->

    <div class="mat-elevation-z8 table-container">
        <table mat-table [dataSource]="dataSource" matSort>
          <ng-container matColumnDef="Userid">
            <th mat-header-cell *matHeaderCellDef mat-sort-header sticky="true"> UserID </th>
            <td mat-cell *matCellDef="let element"> {{element.Userid}} </td>
          </ng-container>
          <ng-container matColumnDef="Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header >Name </th>
            <td mat-cell *matCellDef="let element"> {{element.Name}} </td>
          </ng-container>
          <ng-container matColumnDef="Gender">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Gender </th>
            <td mat-cell *matCellDef="let element"> {{element.Gender}} </td>
          </ng-container>
          <ng-container matColumnDef="Date_of_joining">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Date_of_Joining </th>
            <td mat-cell *matCellDef="let element"> {{element.Date_of_joining|date}} </td>
          </ng-container>
          <ng-container matColumnDef="Date_Of_Creation">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Date_Of_Creation </th>
            <td mat-cell *matCellDef="let element"> {{element.Date_Of_Creation|date}} </td>
          </ng-container>
          <ng-container matColumnDef="Region">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Region </th>
            <td mat-cell *matCellDef="let element"> {{element.Region}} </td>
          </ng-container>
          <ng-container matColumnDef="Role">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Role </th>
            <td mat-cell *matCellDef="let element"> {{element.Role}} </td>
          </ng-container>
          <ng-container matColumnDef="Designation">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Designation </th>
            <td mat-cell *matCellDef="let element"> {{element.Designation}} </td>
          </ng-container>
          <ng-container matColumnDef="City">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> City </th>
            <td mat-cell *matCellDef="let element"> {{element.City}} </td>
          </ng-container>
          <ng-container matColumnDef="StoreCode">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Store_Code </th>
            <td mat-cell *matCellDef="let element"> {{element.StoreCode}} </td>
          </ng-container>
          <ng-container matColumnDef="Store_Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Store_Name </th>
            <td mat-cell *matCellDef="let element"> {{element.Store_Name}} </td>
          </ng-container>
          <ng-container matColumnDef="Store_Type">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Store_Type </th>
            <td mat-cell *matCellDef="let element"> {{element.Store_Type}} </td>
          </ng-container>
          <ng-container matColumnDef="Status">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
            <td mat-cell *matCellDef="let element"> {{element.Status}} </td>
          </ng-container>
          <ng-container matColumnDef="Latest_Login">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Latest_Login </th>
            <td mat-cell *matCellDef="let element"> {{element.Latest_Login|date}} </td>
          </ng-container>
          <ng-container matColumnDef="Overall_Login_Status">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Overall_Login_Status </th>
            <td mat-cell *matCellDef="let element"> {{element.Overall_Login_Status}} </td>
          </ng-container>
          <!-- <ng-container matColumnDef="Login_Activity">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Login_Activity </th>
            <td mat-cell *matCellDef="let element"> {{element.Login_Activity}} </td>
          </ng-container> -->
          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>
      <mat-paginator [pageSizeOptions]="[5, 10, 50 ,100 ,500]" showFirstLastButtons aria-label="Select page of periodic elements" class="paginator-sticky"></mat-paginator>
  </div>







  <ng-template #content let-modal>
    <div class="modal-content organizationSuccessModal" style="background: transparent">
        <div class="modal-body">
            <div>
                <div style="position: relative">
                    <div class="row d-flex justify-content-center mt-3">
                        <div class="col-12 d-flex warning_message_upload justify-content-center font"
                            style="width: auto; position: relative; text-align: center">
                            <div class="mb-3 thumb">
                                <div *ngIf="message == 'Loading data, please wait...';then loader else cross"></div>
                                <ng-template #loader>
                                  <img src="assets/loader.gif" alt="" height="100" width="100">
                                </ng-template>
                                <ng-template #cross>
                                  <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="#FF0000" class="bi bi-x-circle" viewBox="0 0 16 16">
                                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                                    <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
                                  </svg>
                                </ng-template>
                            </div>
                            {{message}}
                        </div>
                    </div>
                    <div class="col-12 d-flex justify-content-center">
                        <div type="button" *ngIf="message != 'Loading data, please wait...'"
                            class="custom-close-btn d-flex justify-content-center align-items-center submit_button mt-3 me-3 font d-flex justify-content-center fontInter"
                            data-bs-dismiss="modal" aria-label="Close" (click)="closeModal()">
                            Okay
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="message != 'Loading data, please wait...';then close "></div>
        <ng-template #close>
            <div class="close-button d-flex justify-content-center align-items-center" (click)="closeModal()">
                X
            </div>
        </ng-template>
    </div>
</ng-template>
</div>